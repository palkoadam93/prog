<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>5. feladat</title>
  </head>
  <body>
    <h1>5. feladat - Egyszerű lekérdezések egy táblából</h1>
    
    <h3>1. Véletlen szám (FROM nélküli SELECT utasítás)</h3>
    <p>SELECT Rnd() AS véletlen, Rnd() AS véletlen_más, Rnd(0) AS véletlen_ua, Int(100*Rnd(0)+1) AS egy_100;</p>

    <h3>2. A mértékegységek listája (DISTINCT szerepe)</h3>
    <p>SELECT mért_egys FROM anyag;</p>
    <p>aztán</p>
    <p>SELECT DISTINCT mért_egys FROM anyag;</p>
    <p>aztán</p>
    <p>SELECT mért_egys FROM anyag GROUP BY mért_egys;</p>
    <p>aztán</p>
    <p>SELECT ALL mért_egys FROM anyag;</p>

    <h3>3. A tábla sorainak a száma (COUNT használata)</h3>
    <p>SELECT COUNT(*) FROM anyag;</p>
    <p>SELECT COUNT(mért_egys) FROM anyag;</p>

    <h3>4. A különböző mértékegységek száma (COUNT(DISTINCT...) használata)</h3>
    <p>SELECT COUNT(DISTINCT mért_egys) FROM anyag;</p>
    <p>vagy</p>
    <p>SELECT DISTINCT mért_egys FROM anyag;</p>
    <p>SELECT COUNT(mért_egys) FROM különböző;</p>
    <p>=> KÜLÖNBÖZŐ{mért_egys}</p>

    <p>A következő két lekérdezés azonos eredményt ad:</p>
    <p>SELECT COUNT(mért_egys) FROM anyag;</p>
    <p>SELECT DISTINCT COUNT(mért_egys) FROM anyag;</p>

    <h3>5. Határozzuk meg, hogy egyes betűkkel hány anyag neve kezdődik! (GROUP BY használata)</h3>
    <p>SELECT COUNT(*) FROM anyag WHERE Left(neve,1) = 'a';</p>
    <p>SELECT *, Left(neve,1) AS első FROM anyag; => ELSŐ_BETŰ{azonosító, neve, mért_egys, egys_ár, készlet, első}</p>
    <p>SELECT első, COUNT(*) AS darab FROM első_betű GROUP BY első;</p>
    <p>SELECT Left(neve,1) AS első, COUNT(*) AS darab FROM anyag GROUP BY Left(neve,1);</p>
    <p>A következő két lekérdezés pontosan ugyanazt az eredményt adja:</p>
    <p>SELECT azonosító, neve, egys_ár FROM anyag;</p>
    <p>SELECT azonosító, MAX(neve), SUM(egys_ár) FROM anyag GROUP BY azonosító;</p>

    <h3>6. Csak azokat a betűket írassuk ki, amelyikkel legalább két anyag neve kezdődik! (HAVING használata)</h3>
    <p>SELECT Left(neve,1) AS első FROM anyag GROUP BY Left(neve,1) HAVING COUNT(*)>=2;</p>

    <p>1. megjegyzés</p>
    <p>SELECT 'kevés', COUNT(*) FROM anyag GROUP BY készlet&lt;15 HAVING készlet&lt;15</p>
    <p>SELECT 'kevés', COUNT(*) FROM anyag HAVING készlet&lt;15;</p>
    <p>SELECT 'kevés', COUNT(*) FROM anyag WHERE készlet&lt;15;</p>
    
    <p>2. megjegyzés: A következő három SELECT utasítás szintaktikailag hibás:</p>
    <p>SELECT 'kevés', készlet FROM anyag HAVING készlet&lt;15;</p>
    <p>SELECT 'kevés', készlet, COUNT(*) FROM anyag HAVING készlet&lt;15;</p>
    <p>SELECT IF(készlet>=15, 'elég', 'kevés'), készlet, COUNT(*) FROM anyag GROUP BY IF(készlet>=15, 'elég', 'kevés');</p>
    <p>Ez már helyes:</p>
    <p>SELECT IF(készlet>=15, 'elég', IF(készlet>=0, 'kevés', 'üres')), COUNT(*) FROM anyag GROUP BY IF(készlet>=15, 'elég', IF(készlet>=0, 'kevés', 'üres'));</p>

    <p>3. megjegyzés</p>
    <p>SELECT anyag.*, 'kevés' FROM anyag WHERE készlet&lt;15 OR készlet IS NULL;</p>

    <h3>7. Számoljuk össze, hogy az anyagok között mennyiből áll rendelkezésre 15 egységnél kevesebb és mennyiből 15 egységnél több vagy éppen 15 egység! (ORDER BY használata)</h3>
    <p>SELECT készlet, COUNT(*) FROM anyag GROUP BY készlet;</p>
    <p>SELECT COUNT(*) FROM anyag GROUP BY készlet&lt;15;</p>
    <p>SELECT készlet&lt;15, IF(készlet&lt;15, 'kevés', 'elég'), COUNT(*) FROM anyag GROUP BY készlet&lt;15;</p>
    <p>SELECT IF(készlet>=15, 'elég', 'kevés'), COUNT(*) FROM anyag GROUP BY készlet>=15 ORDER BY IF(készlet>=15, 'elég', 'kevés') DESC, készlet>=15;</p>
    <p>SELECT IF(készlet>=15, 'elég', 'kevés'), COUNT(*), készlet>=15, AVG(készlet) FROM anyag GROUP BY készlet>=15 ORDER BY IF(készlet>=15, 'elég', 'kevés') DESC, készlet>=15;</p>
    <p>SELECT Right(IF(készlet IS NULL, '1nincs', IF(készlet&lt;15, '2kevés', '3elég')),5), COUNT(*) FROM anyag GROUP BY IF(készlet IS NULL, '1nincs', IF(készlet&lt;15, '2kevés', '3elég'));</p>

    <p>1. megjegyzés</p>
    <p>SELECT IF(készlet>=15, 'elég', 'kevés'), COUNT(*), készlet>=15 FROM anyag GROUP BY készlet>=15 ORDER BY IF(készlet>=15, 'elég', 'kevés') DESC, készlet>=15;</p>
    <p>SELECT IF(készlet>=15, 'elég', 'kevés'), COUNT(*), készlet>=15 FROM anyag GROUP BY készlet>=15 ORDER BY 1 DESC, 3;</p>

    <p>2. megjegyzés</p>

    <h3>8. Írassuk ki minden terméknek a kódját, nevét és árát, és a listához tegyük hozzá a termékek átlagárát! Rendezzük le a listát a termék ára szerint növekvő sorrendbe! (SELECT utasítás mezőlistájában SELECT utasítás használata)</h3>
    <p>SELECT kód, név, ár, (SELECT AVG(ár) FROM termék) AS átlagár FROM termék ORDER BY ár;</p>

    <h3>9. Írassuk ki, hogy átlagosan mennyi rendeltek meg a termékekből! (SUM és AVG együttes használata)</h3>
    <p>SELECT SUM(darab) AS [összes darab] FROM rendelés;</p>
    <p>SELECT kód, SUM(darab) AS [csoportos össz_darab] FROM rendelés GROUP BY kód;</p>
    <p>SELECT AVG(darab) AS [átlagos darab] FROM rendelés;</p>
    <p>SELECT kód, AVG(darab) AS [csoportos átlag_darab] FROM rendelés GROUP BY kód;</p>
    <p>SELECT AVG([csoportos össz_darab]) AS [átlag csoportos össz_darab] FROM összeg;</p>
    <p>Megjegyzés:</p>
    <p>SELECT AVG(SUM(darab)) AS [átlag csoportos össz_darab] FROM rendelés GROUP BY kód;</p>
  </body>
</html>